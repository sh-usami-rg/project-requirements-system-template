# プロジェクト仕様書：顧問ミドル運用ダッシュボード移行

## プロジェクト概要

「顧問名鑑」サービスの受注後運用（ミドル運用）において、現在30個以上のGoogle Spreadsheetsで行っているデータ管理・分析を、BigQueryを基盤としたLooker / Looker Studio環境へ移行し、運用の効率化と分析の高度化を実現する。

**プロジェクト期間**: 2026年1月6日 〜 2026年3月30日

## 前提条件

### 既存システム構成
本プロジェクトは、以下の既存環境を前提として進行する:

#### データ基盤の現状
- **BigQueryデータ層**: 既に構築済み
  - Raw Layer: 各システムからの生データを格納
  - DWH Layer: 分析用に整形されたテーブル群
  - 既存テーブルは本プロジェクトでそのまま利用する方針
- **現行データフロー**: 既存システム → BigQuery (Raw/DWH) → Google Sheets → ミドル運用
- **今回の変更範囲**: Google Sheetsの部分をLooker/Looker Studioに置き換える

#### 本プロジェクトのスコープ
- **実施すること**:
  - 既存BigQuery DWHテーブルの確認とマッピング
  - Looker/Looker Studioからの既存テーブル接続
  - ダッシュボードの構築
  - LookerMLによるコードベース管理の導入
- **実施しないこと**:
  - BigQueryテーブル構造の変更・再設計
  - ETLパイプラインの構築・変更（既に存在するため）
  - 既存システムからBigQueryへのデータ連携の変更

## 背景と課題

### 現状の課題
1. **運用の限界**: 約30個のスプレッドシート（48シート）が乱立しており、手動更新や整合性の確認に多大なコストがかかっている
2. **データの一元化**: データウェアハウス（DWH）層へのデータ集約は進んでいるが、フロントエンド（スプレッドシート）での分析が困難であり、現場で混乱が生じている
3. **拡張性の不足**: Looker StudioのGUI操作のみでは、他事業部への横展開や保守管理の工数が膨大になる
4. **スキルギャップ**: 社内にLookerMLの実装経験者が不足しており、本プロジェクトを通じて技術キャッチアップと標準化を図る必要がある

## 目的とゴール

### 主要目的
1. **意思決定の高速化**: マネージャー陣が直感的に分析・ドリルダウンできる環境を構築
2. **管理コスト削減**: バックオフィス社員による手作業のダッシュボード作成・更新工数を削減
3. **スケール対応**: LookerML（コードベース管理）を導入し、将来的なニーズ増に対して低コストで対応可能な基盤を作る
4. **技術標準化**: LookerMLの実装ノウハウを蓄積し、他部署への展開を可能にする

### ビジネス成果
- スプレッドシート管理工数を80%削減
- データ更新の自動化によるリアルタイム分析の実現
- 横展開可能なBI基盤の確立

## プロジェクト体制とアプローチ

### 優先度ベースのアプローチ
- **優先度：高** → Looker Studio（GUI）で迅速に構築
  - 稼働状況、解約率、粗利集計など、経営判断に直結するダッシュボード
  - 迅速な価値提供を優先
- **優先度：中・低** → Looker（LookerML）でコードベース構築
  - 詳細分析、部署別レポート、将来的な拡張が必要なダッシュボード
  - 保守性と拡張性を重視

### 実装フェーズ
```
Phase 1 (1月): 基盤整備と設計
Phase 2 (2月): 実装と技術検証
Phase 3 (3月): フル移行と展開
```

## システムアーキテクチャ

### アーキテクチャ概要
```
[データソース層]
├── 契約管理システム
├── 財務システム
└── その他基幹システム
         ↓
[既存データ基盤 - BigQuery] ※既に構築済み
├── Raw Layer (生データ)
└── Data Warehouse Layer (分析用マート) ← 本プロジェクトで利用
         ↓
[BIレイヤー] ※本プロジェクトで構築
├── Looker (LookerML) - 中・低優先度
│   ├── Models
│   ├── Views
│   └── Explores
└── Looker Studio - 高優先度
    └── ダッシュボード・レポート
         ↓
[利用者]
├── マネージャー層 (意思決定)
├── 担当者層 (日次オペレーション)
└── バックオフィス (分析・レポーティング)

【現行】データソース層 → BigQuery → Google Sheets (30+ sheets) → 手作業運用
【移行後】データソース層 → BigQuery → Looker/Looker Studio → 自動化運用
```

### 技術スタック
- **データウェアハウス**: Google BigQuery（既存環境を利用）
- **BIツール**:
  - Google Looker (LookerML)
  - Google Looker Studio
- **バージョン管理**: Git (LookerMLプロジェクト管理用)
- **CI/CD**: GitHub Actions (LookerMLデプロイメント自動化)

### データ更新戦略
- **更新頻度**: 日次バッチ（既存のBigQuery更新プロセスに依存）
- **更新時刻**: 早朝6-7時（日本時間）を想定
- **データ鮮度**: 前営業日のデータが翌朝の業務開始前に反映される
- **更新遅延の許容**: 24時間以内であれば許容範囲

## スプレッドシート一覧

### 全48シートの分類

#### 1. 稼働・解約管理 (ID: 1-3)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 1 | 稼働状況_休止・解約率 | 稼働・流出・休止・解約数および率の月次推移 | 高 |
| 2 | 稼働状況_（集計）稼働数_案件数_全体 | 新規案件の確定/みなし状況、解約率、総稼働数 | 高 |
| 3 | 稼働状況_（集計）稼働数_企業数_全体 | 企業単位の契約・稼働サマリ | 高 |

#### 2. エリア別分析 (ID: 4-5)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 4 | 稼働状況_(集計)稼働数_都道府県別 | 都道府県別の案件数および必要人員数 | 中 |
| 5 | 稼働状況_(集計)稼働企業数_都道府県別 | 担当者別の都道府県別稼働企業数 | 中 |

#### 3. 担当者別分析 (ID: 6-7)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 6 | 稼働状況_個人別保有数 | 担当者ごとの案件・社数を多角的に分析 | 高 |
| 7 | 稼働状況_保有案件種別 | 担当者役職・案件期間・種別による件数管理 | 中 |

#### 4. 顧問別分析 (ID: 8)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 8 | 稼働状況_顧問別稼働数 | 顧問ごとの活動状況、解約阻止交渉、ミッション内容 | 中 |

#### 5. KPI指標管理 (ID: 9-10)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 9 | 稼働状況_（集計）当月稼働案件_突破率 | 月ごとの案件「突破率」の実数および率 | 高 |
| 10 | 稼働状況_稼働数_部責確認用 | 確定・みなし分の案件数/社数の前月比 | 高 |

#### 6. 財務管理 (ID: 11)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 11 | 粗利集計_（集計）全案件 | 会社ごとの入金額、支払額、粗利額、粗利率 | 高 |

#### 7. 継続性分析 (ID: 12)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 12 | 【顧問名鑑】企業継続コマ数_推移 | 個別企業の顧問活動コマ数の月次推移（2020年〜） | 中 |

#### 8. 開始前解約分析 (ID: 13-20)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 13-15 | 開始前解約_（各種まとめ） | 契約開始前の解約、滞留案件、解約理由の内訳集計 | 中 |
| 16-20 | 開始前解約_開拓者・組織別 | 営業担当・部課別の開始前解約率、チェンジ提案状況 | 低 |

#### 9. マスタデータ (ID: 21-23)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 21-23 | 累計顧問数_（顧問・企業別） | 顧問・企業の契約詳細、報酬体系、担当者情報等 | 高 |

#### 10. 受注分析 (ID: 24-25)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 24-25 | 受注案件シート_（集計・料金判断） | 特定条件による案件抽出ログ、料金体系の基準適合性チェック | 中 |

#### 11. 異常検知 (ID: 26-27)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 26-27 | 4ヶ月ロック調査 | 稼働月数と入金回数の差異原因の究明 | 低 |

#### 12. SS（営業）分析 (ID: 28-31)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 28-31 | 【部外秘】顧問名鑑_各種分析（SS限定） | SS（営業）のパフォーマンス、企業数構成比率の時系列分析 | 中 |

#### 13. 継続月数分析 (ID: 32-44)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 32-44 | 継続月数算出（各種切口） | 減衰率、残存率、平均継続月数をミッション・顧問カテゴリ等で詳細分析 | 低 |

#### 14. 定期訪問管理 (ID: 45-48)
| ID | シート名 | 概要 | 優先度 |
|:---|:---|:---|:---|
| 45-48 | 定期訪問網羅率 | 課・個人別の訪問必須企業に対する取得率・網羅率 | 中 |

## データモデル設計

### BigQueryデータ階層

**注**: 以下は既存のBigQuery環境の概念的な構造を示している。実際のテーブル名やスキーマは既存環境に依存する。

#### 1. Raw Layer (`raw_*`)
- 各システムから取り込まれた生データ
- 既存のETLプロセスで管理されている
- 本プロジェクトでは直接利用しない

#### 2. Data Warehouse Layer (`dwh_*`)
- **本プロジェクトで利用するメインデータ層**
- 分析用に整形されたテーブル群
- Looker/Looker Studioからこの層に接続する
- 想定されるテーブル分類:
  - ディメンションテーブル: 顧問、企業、担当者、日付等のマスタデータ
  - ファクトテーブル: 契約、活動、財務等のトランザクションデータ
  - 集計テーブル: 月次KPI、エリア別集計等の事前集計データ

**Phase 1での重要タスク**: 既存DWHテーブルの詳細調査とLookerMLへのマッピング設計

### 主要エンティティ（想定）

**注**: 以下は分析に必要なエンティティの概念モデルである。実際のBigQueryテーブルがこの構造に完全に一致するとは限らない。Phase 1で既存テーブルとのマッピングを行う。

#### 1. 顧問 (Advisor)
- 顧問ID、顧問名、顧問カテゴリ、専門分野、ステータス等

#### 2. 企業 (Company)
- 企業ID、企業名、都道府県、業種、企業規模等

#### 3. 契約 (Contract)
- 契約ID、企業ID、顧問ID、担当者ID、契約種別、契約ステータス、開始日、終了日、月額料金等

#### 4. 活動実績 (Activity)
- 活動ID、契約ID、活動日、活動コマ数、活動種別等

#### 5. 財務実績 (Financial)
- 財務ID、契約ID、対象月、入金額、支払額、粗利額、粗利率等

### データフロー
```
[既存システム]
  → [BigQuery Raw Layer] (既存ETL) ※本プロジェクトのスコープ外
  → [BigQuery DWH Layer] (既存処理) ※本プロジェクトのスコープ外
  → [Looker / Looker Studio] (本プロジェクトで構築)
  → [利用者]
```

## BI/ダッシュボード設計

### ダッシュボード構成

#### 優先度：高（Looker Studio実装）

##### 1. 経営ダッシュボード
- **目的**: 経営層向けKPIモニタリング
- **主要指標**:
  - 総稼働数（案件数・企業数）
  - 解約率・休止率・維持率
  - 粗利総額・粗利率
  - 突破率
- **更新頻度**: 日次
- **スプレッドシート**: ID 1, 2, 3, 9, 10, 11

##### 2. 稼働状況ダッシュボード
- **目的**: オペレーション担当者向け稼働管理
- **主要指標**:
  - 担当者別保有案件数
  - エリア別稼働状況
  - 新規・解約・休止の内訳
- **フィルタ**: 担当者、都道府県、期間、案件種別
- **スプレッドシート**: ID 4, 5, 6, 7, 10

##### 3. 財務ダッシュボード
- **目的**: 財務担当者向け収益管理
- **主要指標**:
  - 月次売上・粗利推移
  - 会社別収益ランキング
  - 粗利率分布
- **スプレッドシート**: ID 11

#### 優先度：中（Looker LookerML実装）

##### 4. 顧問パフォーマンスダッシュボード
- **目的**: 顧問の活動状況分析
- **主要指標**:
  - 顧問別稼働数・活動コマ数
  - 継続月数・継続率
  - ミッション達成状況
- **スプレッドシート**: ID 8, 12, 32-44

##### 5. 解約分析ダッシュボード
- **目的**: 解約傾向の把握と対策立案
- **主要指標**:
  - 開始前解約率（組織別・担当者別）
  - 解約理由分析
  - 滞留案件リスト
- **スプレッドシート**: ID 13-20

##### 6. 営業（SS）分析ダッシュボード
- **目的**: 営業パフォーマンスの可視化
- **主要指標**:
  - 受注件数・受注率
  - 料金体系別の案件分布
  - 企業数構成比率の推移
- **スプレッドシート**: ID 24-25, 28-31

#### 優先度：低（Looker LookerML実装）

##### 7. 詳細分析ダッシュボード
- **目的**: アドホック分析・深堀り調査
- **主要指標**:
  - 継続月数の詳細分析（減衰率、残存率）
  - 異常検知（4ヶ月ロック調査）
  - 定期訪問網羅率
- **スプレッドシート**: ID 26-27, 32-44, 45-48

### LookerML設計方針

#### Model構成
```
models/
├── advisor_operations.model.lkml  # メインモデル
└── financial_analysis.model.lkml  # 財務分析用モデル
```

#### View構成（主要ビュー）
```
views/
├── base/
│   ├── dim_advisor.view.lkml       # 顧問ディメンション
│   ├── dim_company.view.lkml       # 企業ディメンション
│   ├── dim_staff.view.lkml         # 担当者ディメンション
│   └── dim_date.view.lkml          # 日付ディメンション
├── facts/
│   ├── fact_contract.view.lkml     # 契約ファクト
│   ├── fact_activity.view.lkml     # 活動ファクト
│   └── fact_financial.view.lkml    # 財務ファクト
└── aggregates/
    ├── monthly_kpi.view.lkml       # 月次KPI集計
    └── advisor_performance.view.lkml # 顧問パフォーマンス集計
```

#### Explore構成
```
explores/
├── advisor_activity_explore         # 顧問活動分析
├── contract_management_explore      # 契約管理分析
├── financial_performance_explore    # 財務パフォーマンス分析
└── churn_analysis_explore           # 解約分析
```

### 共通分析軸（Dimensions）
1. **時間軸**: 年、四半期、月、週、日
2. **組織軸**: 部、課、担当者
3. **地域軸**: エリア、都道府県
4. **契約軸**: 契約種別、契約ステータス、案件期間
5. **顧問軸**: 顧問カテゴリ、専門分野
6. **企業軸**: 業種、企業規模

## 移行計画とロードマップ

### Phase 1: 基盤整備と設計（1月）

#### Week 1-2: 既存環境の調査と設計準備
- [ ] 既存BigQuery DWHテーブルの詳細調査（スキーマ、データ量、更新頻度）
- [ ] スプレッドシート48項目と既存DWHテーブルのマッピング分析
- [ ] データ整合性検証スクリプトの作成（Spreadsheet vs BigQuery）
- [ ] Looker/Looker Studio環境のセットアップ

#### Week 3-4: 要件定義と設計
- [ ] バックオフィス担当者によるダッシュボード要件の体系化
- [ ] 優先度の確定（高・中・低の分類）
- [ ] ダッシュボードのワイヤーフレーム作成
- [ ] 分析軸・KPI定義の明確化
- [ ] LookerML設計方針の策定（既存テーブルへのマッピング方法）

### Phase 2: 実装と技術検証（2月）

#### Week 1-2: Looker Studio実装（優先度：高）
- [ ] 経営ダッシュボードの構築（ID 1, 2, 3, 9, 10, 11）
- [ ] 稼働状況ダッシュボードの構築（ID 4, 5, 6, 7, 10）
- [ ] 財務ダッシュボードの構築（ID 11）
- [ ] ユーザーレビューとフィードバック収集

#### Week 3-4: Looker環境構築とトライアル
- [ ] Lookerプロジェクトのセットアップ
- [ ] Git連携の設定
- [ ] LookerMLの基本構造実装（Model, View, Explore）
- [ ] ハンズオン実装と導入ドキュメント作成
- [ ] チーム内でのLookerMLトレーニング実施

### Phase 3: フル移行と展開（3月）

#### Week 1-2: Looker実装（優先度：中）
- [ ] 顧問パフォーマンスダッシュボード（ID 8, 12, 32-44）
- [ ] 解約分析ダッシュボード（ID 13-20）
- [ ] 営業（SS）分析ダッシュボード（ID 24-25, 28-31）

#### Week 3-4: Looker実装（優先度：低）＋最終調整
- [ ] 詳細分析ダッシュボード（ID 26-27, 32-44, 45-48）
- [ ] 全ダッシュボードの統合テスト
- [ ] パフォーマンスチューニング
- [ ] ユーザートレーニングとドキュメント整備
- [ ] スプレッドシートからの完全移行
- [ ] 本番リリースと監視体制の確立

## 技術要件

### BigQuery
- **リージョン**: asia-northeast1 (東京) ※既存環境に準拠
- **データセット構成**: 既存環境のデータセット構成を利用
- **パーティショニング/クラスタリング**: 既存テーブルの設定を維持
- **データ保持期間**: 既存ポリシーに準拠
- **コスト予算**: 月間5-10万円（BigQuery + Lookerライセンス含む）
- **コスト管理**:
  - BigQueryのクエリコスト監視（予算アラート設定）
  - Looker Studioのクエリ最適化
  - 不要なクエリの削減とキャッシュ活用

### Looker
- **バージョン**: Looker (Google Cloud core)
- **開発環境**: Development Mode
- **本番環境**: Production
- **Git連携**: GitHub
- **アクセス制御**: ロールベースアクセス制御（RBAC）
  - Admin: 全権限
  - Developer: LookerML編集権限
  - Viewer: 閲覧のみ

### Looker Studio
- **データソース接続**: BigQuery直接接続
- **更新頻度**:
  - 経営ダッシュボード: 日次自動更新（早朝6-7時のBigQuery更新後）
  - その他: 週次または手動更新
- **共有設定**: 組織内限定共有

### セキュリティとアクセス制御
- **BigQuery**:
  - IAMによるアクセス制御
  - 列レベルセキュリティ（顧問名、企業名を特定ロールのみ閲覧可能に制限）
  - 監査ログの有効化
- **Looker**:
  - SSO（シングルサインオン）連携（可能であれば）
  - 行レベルセキュリティ（部署別データ分離）
- **保護対象データ**:
  - 顧問名、企業名: 列レベルセキュリティで保護
  - その他の機密情報: 必要に応じてアクセス制御を追加

### データ品質管理
- **整合性チェック**:
  - スプレッドシートとBigQueryの数値突合（Phase 1で実施）
  - 主要KPIの月次変動チェック（異常値検出）
- **エラー対応方針**:
  - データ不整合検出時: メール通知による手動対応
  - エラーログの記録と定期レビュー
  - 重大なエラーの場合は関係者へエスカレーション

### 運用・監視
- **監視項目**:
  - BigQuery更新ジョブの成功/失敗
  - ダッシュボードのクエリエラー
  - コスト使用量の推移
- **アラート通知**:
  - 通知先: メール（現状の運用体制に合わせる）
  - 通知タイミング: ジョブ失敗時、コスト閾値超過時
- **障害対応**:
  - 対応時間目標: 24時間以内
  - エスカレーションフロー: 担当者 → マネージャー → IT部門

## 実装ガイドライン

### 1. 既存テーブルの活用とマッピング
- 既存BigQuery DWHテーブルをそのまま利用する
- 48項目のスプレッドシートデータが既存テーブルのどこに格納されているかをマッピング
- LookerMLのViewは既存テーブル構造に合わせて設計し、再利用可能な形で作成する
- 必要に応じてLooker側でデータ変換・集計を実施（BigQueryテーブルは変更しない）

### 2. 命名規則

#### BigQueryテーブル
既存テーブルの命名規則に準拠する（変更しない）

#### LookerMLファイル
```
{name}.{type}.lkml
例:
- dim_advisor.view.lkml
- advisor_operations.model.lkml
- advisor_activity.explore.lkml
```

#### フィールド名
```
英語での標準的な命名を使用：
- churn_rate: 解約率
- active_contracts: 稼働案件数
- gross_profit_margin: 粗利率
- advisor_activity_count: 顧問活動コマ数
- contract_continuation_months: 契約継続月数
```

### 3. LookerML設計原則

#### DRY原則（Don't Repeat Yourself）
- 共通のDimensionやMeasureは基底Viewで定義
- Extendを活用して重複を避ける

#### パフォーマンス最適化
- 頻繁に使用される集計はBigQueryで事前集計（Aggregate Table）
- Persistent Derived Tableの活用
- Incremental PDTによる差分更新

#### 保守性の確保
- コメントによる仕様説明
- 命名規則の統一
- バージョン管理（Git）の徹底

### 4. 拡張性の考慮
- 他部署が参照することを前提にExploreを設計
- 汎用的なDimensionとMeasureを定義
- ドキュメント（description）を充実させる

### 5. テストとバリデーション
- **データ整合性チェック**: スプレッドシートとBigQuery間の数値突合（Phase 1で実施）
- **ダッシュボード目視検証**: ユーザーによる表示内容の確認とフィードバック収集
- **LookML構文チェック**: Looker組み込みのLookML Validatorを使用
- **パフォーマンス確認**: 現状、パフォーマンス問題は想定していないが、問題が発生した場合は対処

## 成果物

### 1. データ基盤関連
- [ ] 既存BigQuery DWHテーブルのドキュメント（テーブル一覧、スキーマ定義）
- [ ] スプレッドシート→BigQueryマッピング表
- [ ] データ品質チェックスクリプト

### 2. BIダッシュボード
- [ ] Looker Studioダッシュボード（優先度：高）×3
- [ ] Lookerダッシュボード（優先度：中・低）×4

### 3. LookerMLコードベース
- [ ] Looker Models
- [ ] Looker Views
- [ ] Looker Explores
- [ ] GitHubリポジトリ

### 4. ドキュメント
- [ ] システムアーキテクチャ設計書
- [ ] データモデル定義書
- [ ] ダッシュボード利用マニュアル
- [ ] LookerML開発ガイドライン
- [ ] 運用手順書

### 5. トレーニング資料
- [ ] Looker Studio利用者向けトレーニング資料
- [ ] LookerML開発者向けハンズオン資料
- [ ] トラブルシューティングガイド

## 制約条件

### スケジュール制約
- プロジェクト期間: 2026年1月6日 〜 2026年3月30日（約3ヶ月）
- 各フェーズの期限は厳守（経営報告のタイミングに影響）

### リソース制約
- LookerML実装経験者が社内にいない（学習コスト）
- バックオフィス担当者の要件定義への時間確保が必要
- 並行して既存スプレッドシートでの運用も継続

### 技術制約
- BigQueryのストレージ・クエリコストの予算制約（月間5-10万円）
- Lookerのライセンス数制限
- 既存BigQueryテーブル構造を変更できない（スコープ外）
- スプレッドシートの履歴データの不完全性

### データ制約
- 過去データの一部に欠損や不整合がある可能性
- スプレッドシート間でのデータ定義の不統一
- 既存DWHテーブルの構造がSPEC記載のエンティティモデルと完全一致しない可能性

## 依存関係

### 外部システム
- 既存BigQuery環境（本プロジェクトの前提条件）
- 既存ETLプロセス（BigQueryへのデータ更新）
- Google Workspace（スプレッドシート参照：検証用）

### 社内調整
- バックオフィス部門（要件定義、検証）
- マネージャー層（ダッシュボードレビュー、承認）
- IT部門（インフラ、セキュリティ承認、既存BigQuery環境の情報提供）

### 技術的依存
- Lookerインスタンスのプロビジョニング
- GitHubリポジトリのアクセス権限設定
- 既存BigQueryテーブルへのアクセス権限付与

## 成功基準

### ビジネス指標
- [ ] スプレッドシート管理工数を80%削減
- [ ] ダッシュボード更新の自動化率100%
- [ ] マネージャー層の満足度80%以上
- [ ] データ更新の遅延を24時間以内に短縮

### 技術指標
- [ ] ダッシュボードの表示速度: 現状、問題が発生していないため具体的な閾値は設定しない。ユーザーから遅延の指摘があれば対処
- [ ] データ整合性100%（スプレッドシートとの突合、Phase 1で検証）
- [ ] BigQueryクエリコストを月間予算（5-10万円）内に収める
- [ ] システム稼働率: 既存BigQuery環境の稼働率に依存

### 組織指標
- [ ] LookerML開発者を3名以上育成
- [ ] 他部署への横展開事例を1件以上創出
- [ ] ドキュメント整備率100%
- [ ] ユーザートレーニング完了率100%

### プロジェクト管理指標
- [ ] スケジュール遵守率90%以上
- [ ] 予算内での完了
- [ ] リスク発生時の対応時間24時間以内
- [ ] 全成果物の期限内納品

## リスク管理

### 主要リスクと対策

#### リスク1: LookerML習熟度不足
- **影響**: 開発遅延、品質低下
- **対策**:
  - 2月のトライアル期間での集中学習
  - 外部トレーニングの活用
  - シンプルな実装から開始

#### リスク2: データ品質問題
- **影響**: ダッシュボードの信頼性低下
- **対策**:
  - Phase 1での徹底的なデータ検証
  - データ品質チェックの自動化
  - 問題データのクレンジングルール策定

#### リスク3: ユーザー要件の変更
- **影響**: スコープクリープ、スケジュール遅延
- **対策**:
  - 優先度による段階的実装
  - 変更管理プロセスの明確化
  - Phase 3での調整バッファ確保

#### リスク4: BigQueryコスト超過
- **影響**: 予算オーバー
- **対策**:
  - パーティショニング・クラスタリングの徹底
  - クエリ最適化
  - コストモニタリングの自動化

## 次のステップ

1. **プロジェクトキックオフ**: 関係者への説明会開催
2. **環境セットアップ**: BigQuery、Lookerの環境構築
3. **要件詳細化**: バックオフィス担当者へのヒアリング
4. **パイロット実装**: 優先度最高のダッシュボード1つで検証

---

## 変更履歴

### Version 2.0 - 2026-01-15
**レビューア**: Claude AI (Sonnet 4.5)

**主な変更点**:

**Critical問題の解決（4件）**:
1. パフォーマンス要件の明確化 - 現状問題視していないことを明記
2. データ更新頻度の具体化 - 早朝6-7時の日次バッチ実行を明記
3. セキュリティ要件の詳細化 - 顧問名・企業名の列レベルセキュリティ保護を明記
4. データ品質基準の明確化 - メール通知による手動対応方針を明記

**Important問題の解決（4件）**:
5. ETLプロセスの訂正 - 既存システム→BigQuery→Spreadsheetの実態を反映
6. コスト管理の明確化 - 月間5-10万円の予算を明記
7. 運用・監視戦略の具体化 - メール通知によるアラート運用を明記
8. テスト戦略の明確化 - 目視検証を主体とする方針を明記

**構造的改善（2件）**:
9. 前提条件セクションの追加 - 既存BigQuery環境（Raw+DWH層）の存在を明記
10. Phase 1タスクの修正 - 「テーブル設計確定」→「既存テーブル確認とマッピング」に変更

**改善カテゴリ別サマリー**:
- 曖昧さの解消: 4件（パフォーマンス、更新頻度、セキュリティ、品質管理）
- 矛盾の修正: 2件（ETL理解の誤り、テーブル設計の前提）
- 不足の補完: 4件（前提条件、コスト、監視、テスト）
- アーキテクチャ改善: なし（既存環境を前提とする方針が明確化）

**レビューで明らかになった重要事項**:
- 既存BigQuery環境（Raw + DWH層）が既に構築済み
- 本プロジェクトはSpreadsheet→Looker/Looker Studioへの置き換えが主目的
- BigQueryテーブル構造の変更は本プロジェクトのスコープ外
- データ更新は既存ETLプロセスに依存（早朝6-7時想定）
- パフォーマンスは現状問題視されていない

---

**文書管理情報**
- 作成日: 2026-01-15
- Version 1.0 最終更新日: 2026-01-15
- Version 2.0 最終更新日: 2026-01-15（レビュー改訂版）
- 承認者: [未定]
- 次回レビュー予定: Phase 1完了時（2026年1月末）
